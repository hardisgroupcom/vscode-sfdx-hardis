---
#
# Documentation:
# https://help.github.com/en/articles/workflow-syntax-for-github-actions
#

##################################################
# Start the job when a GitHub release is created #
##################################################
name: "Build & Deploy - RELEASE"
on:
  release:
    # Want to run the automation when a release is created
    types: ["created"]

jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions: read-all
    environment:
      name: release
    steps:
      - uses: actions/checkout@v3
      - run: yarn
      - uses: lannonbr/vsce-action@master
        with:
          args: "publish -p $VSCE_TOKEN"
        env:
          VSCE_TOKEN: ${{ secrets.VSCE_TOKEN }}
