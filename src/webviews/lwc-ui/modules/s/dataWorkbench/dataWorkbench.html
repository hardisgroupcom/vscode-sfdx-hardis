<template>
  <div class="slds-card blue-back">
    <div class="slds-card__header slds-grid">
      <header class="slds-media slds-media_center slds-has-flexi-truncate">
        <div class="slds-media__figure">
          <span class="slds-icon_container slds-icon-standard-dataset">
            <lightning-icon icon-name="standard:dataset" alternative-text="Data" size="medium"></lightning-icon>
          </span>
        </div>
        <div class="slds-media__body">
          <div class="slds-grid slds-grid_align-spread">
            <h2 class="slds-card__header-title">
              <span class="slds-text-heading_medium">Data Import/Export Workbench</span>
            </h2>
          </div>
          <p class="slds-text-body_small slds-line-height_reset">
            Manage SFDMU data workspaces and run export/import/delete operations
          </p>
        </div>
      </header>
      <div class="slds-no-flex">
        <lightning-button
          variant="brand"
          label="Create Workspace"
          title="Create a new data import/export workspace"
          icon-name="utility:add"
          onclick={handleCreateWorkspace}
        ></lightning-button>
      </div>
    </div>

    <template if:true={isLoading}>
      <div class="slds-card__body slds-card__body_inner">
        <div class="slds-text-align_center slds-p-around_large">
          <lightning-spinner alternative-text="Loading workspaces..." size="medium"></lightning-spinner>
          <p class="slds-text-body_small slds-text-color_weak slds-m-top_small">Loading workspaces...</p>
        </div>
      </div>
    </template>

    <template if:false={isLoading}>
      <template if:false={hasWorkspaces}>
        <div class="slds-card__body slds-card__body_inner">
          <div class="slds-text-align_center slds-p-around_large">
            <lightning-icon icon-name="utility:database" size="large" class="slds-text-color_weak"></lightning-icon>
            <h3 class="slds-text-heading_medium slds-m-top_medium">No Workspaces Found</h3>
            <p class="slds-text-body_regular slds-text-color_weak slds-m-top_small">
              Create your first data workspace to get started.
            </p>
            <lightning-button
              variant="brand"
              label="Create Your First Workspace"
              class="slds-m-top_medium"
              onclick={handleCreateWorkspace}
            ></lightning-button>
          </div>
        </div>
      </template>
    </template>

    <template if:false={isLoading}>
      <template if:true={hasWorkspaces}>
        <div class="slds-card__body slds-card__body_inner">
          <div class="slds-grid slds-gutters">
            <div class="slds-col slds-size_1-of-2 slds-medium-size_1-of-3 slds-large-size_1-of-4 workspace-list-container">
              <lightning-card title="Available Workspaces">
                <s-multiline-helptext slot="actions" content="Each workspace represents a SFDMU export.json configuration.<br/>Click on a workspace to view actions and details."></s-multiline-helptext>
                <div class="slds-card__body slds-card__body_inner">
                  <div class="workspace-list">
                    <template for:each={workspacesForDisplay} for:item="workspace">
                      <div 
                        key={workspace.path} 
                        class={workspace.cssClass}
                        data-path={workspace.path}
                        onclick={handleWorkspaceSelect}
                      >
                        <div class="slds-media slds-media_small">
                          <div class="slds-media__figure">
                            <lightning-icon icon-name={workspace.iconName} size="small"></lightning-icon>
                          </div>
                          <div class="slds-media__body">
                            <p class="slds-text-body_regular slds-truncate" title={workspace.label}>
                              <strong>{workspace.label}</strong>
                            </p>
                            <p class="slds-text-body_small slds-text-color_weak slds-truncate" title={workspace.name}>
                              {workspace.name}
                            </p>
                            <p class="slds-text-body_small slds-text-color_weak slds-truncate">
                              {workspace.objectsCount} object(s)
                            </p>
                          </div>
                        </div>
                      </div>
                    </template>
                  </div>
                </div>
              </lightning-card>
            </div>

            <div class="slds-col slds-size_1-of-2 slds-medium-size_2-of-3 slds-large-size_3-of-4">
              <template if:true={selectedWorkspace}>
                <lightning-card title={selectedWorkspace.label}>
                  <div slot="actions">
                    <template if:true={showLargeActions}>
                      <div class="slds-show_large slds-grid">
                        <lightning-button
                          variant="brand"
                          label="Export data"
                          title="Export data from Salesforce using this workspace"
                          icon-name="utility:download"
                          icon-position="left"
                          size="small"
                          onclick={handleExportData}
                        ></lightning-button>
                        <lightning-button
                          variant="brand"
                          label="Import data"
                          title="Import data to Salesforce using this workspace"
                          icon-name="utility:upload"
                          icon-position="left"
                          size="small"
                          onclick={handleImportData}
                        ></lightning-button>
                        <lightning-button
                          variant="destructive"
                          label="Delete data"
                          title="Delete data in Salesforce using this workspace"
                          icon-name="utility:close"
                          icon-position="left"
                          size="small"
                          onclick={handleDeleteData}
                        ></lightning-button>
                      </div>
                    </template>

                    <template if:false={showLargeActions}>
                      <div class="slds-hide_large">
                        <lightning-button-menu
                          alternative-text="Workspace Actions"
                          menu-alignment="right"
                          variant="border-filled"
                          icon-name="utility:down"
                        >
                          <lightning-menu-item
                            value="export"
                            label="Export Data"
                            icon-name="utility:download"
                            onclick={handleExportData}
                          ></lightning-menu-item>
                          <lightning-menu-item
                            value="import"
                            label="Import Data"
                            icon-name="utility:upload"
                            onclick={handleImportData}
                          ></lightning-menu-item>
                          <lightning-menu-item
                            value="deleteData"
                            label="Delete Data"
                            icon-name="utility:close"
                            onclick={handleDeleteData}
                          ></lightning-menu-item>
                        </lightning-button-menu>
                      </div>
                    </template>
                  </div>

                  <!-- Section: Workspace Properties -->
                  <div class="detail-section">
                    <div class="section-header">
                      <div class="section-header-left">
                        <lightning-icon icon-name="utility:info_alt" size="xx-small" class="slds-m-right_x-small"></lightning-icon>
                        <h3 class="slds-text-title_caps">Properties</h3>
                      </div>
                      <div class="section-header-right">
                        <lightning-button-icon
                          icon-name="utility:edit"
                          alternative-text="Edit properties"
                          title="Edit workspace name, label and description"
                          size="small"
                          onclick={handleEditProperties}
                        ></lightning-button-icon>
                        <lightning-button-icon
                          icon-name="utility:open_folder"
                          alternative-text="Open folder in explorer"
                          title="Open workspace folder in OS explorer"
                          size="small"
                          onclick={handleOpenFolder}
                        ></lightning-button-icon>
                        <lightning-button-icon
                          icon-name="utility:open"
                          alternative-text="Open export.json"
                          title="Open export.json in editor"
                          size="small"
                          onclick={handleConfigureWorkspace}
                        ></lightning-button-icon>
                        <lightning-button-icon
                          icon-name="utility:delete"
                          alternative-text="Delete workspace"
                          title="Delete this workspace permanently"
                          variant="bare-destructive"
                          size="small"
                          data-path={selectedWorkspace.path}
                          onclick={handleDeleteWorkspace}
                        ></lightning-button-icon>
                      </div>
                    </div>
                    <div class="properties-grid">
                      <div class="property-item">
                        <span class="property-label">Folder</span>
                        <span class="property-value">{selectedWorkspace.name}</span>
                      </div>
                      <template if:true={selectedWorkspace.description}>
                        <div class="property-item property-item_full">
                          <span class="property-label">Description</span>
                          <span class="property-value">{selectedWorkspace.description}</span>
                        </div>
                      </template>
                    </div>
                  </div>

                  <!-- Section: Objects -->
                  <div class="detail-section">
                    <div class="section-header">
                      <div class="section-header-left">
                        <lightning-icon icon-name="utility:sobject" size="xx-small" class="slds-m-right_x-small"></lightning-icon>
                        <h3 class="slds-text-title_caps">Objects ({selectedWorkspace.objectsCount})</h3>
                      </div>
                      <lightning-button
                        variant="neutral"
                        label="Add Object"
                        icon-name="utility:add"
                        onclick={handleAddObject}
                        title="Add a new object configuration"
                      ></lightning-button>
                    </div>
                    <template if:true={hasSelectedWorkspaceObjects}>
                      <div class="objects-grid">
                        <template for:each={selectedWorkspaceObjectsForDisplay} for:item="obj">
                          <div key={obj.displayIndex} class="object-card">
                            <div class="object-card-header">
                              <div class="object-card-title">
                                <span class="slds-badge slds-badge_inverse object-operation-badge">{obj.operation}</span>
                                <span class="object-name">{obj.objectName}</span>
                              </div>
                              <div class="object-actions">
                                <lightning-button-icon
                                  icon-name="utility:edit"
                                  alternative-text="Edit object"
                                  title="Edit object"
                                  size="small"
                                  data-index={obj.index}
                                  onclick={handleEditObject}
                                ></lightning-button-icon>
                                <lightning-button-icon
                                  icon-name="utility:delete"
                                  alternative-text="Delete object"
                                  title="Delete object"
                                  size="small"
                                  variant="bare-destructive"
                                  data-index={obj.index}
                                  onclick={handleDeleteObject}
                                ></lightning-button-icon>
                              </div>
                            </div>
                            <p class="object-query" title={obj.query}>{obj.query}</p>
                            <div class="object-badges">
                              <template if:true={obj.externalId}>
                                <span class="slds-badge object-badge">External Id: {obj.externalId}</span>
                              </template>
                              <template if:true={obj.deleteOldData}>
                                <span class="slds-badge slds-badge_success object-badge">deleteOldData</span>
                              </template>
                              <template if:true={obj.useQueryAll}>
                                <span class="slds-badge slds-badge_success object-badge">useQueryAll</span>
                              </template>
                              <template if:true={obj.updateWithMockData}>
                                <span class="slds-badge slds-badge_success object-badge">Mock Data</span>
                              </template>
                              <template if:true={obj.hasMockFields}>
                                <span class="slds-badge object-badge">{obj.mockFieldsCount} mock field(s)</span>
                              </template>
                              <template if:true={obj.batchSize}>
                                <span class="slds-badge object-badge">Batch: {obj.batchSize}</span>
                              </template>
                            </div>
                          </div>
                        </template>
                      </div>
                    </template>
                    <template if:false={hasSelectedWorkspaceObjects}>
                      <div class="empty-section-message">
                        <lightning-icon icon-name="utility:info" size="x-small" class="slds-m-right_x-small"></lightning-icon>
                        <span>No objects configured yet. Click "Add Object" to add your first object.</span>
                      </div>
                    </template>
                  </div>

                  <!-- Section: Exported Files -->
                  <div class="detail-section">
                    <div class="section-header">
                      <div class="section-header-left">
                        <lightning-icon icon-name="utility:file" size="xx-small" class="slds-m-right_x-small"></lightning-icon>
                        <h3 class="slds-text-title_caps">Exported Files</h3>
                      </div>
                      <lightning-button-icon
                        icon-name="utility:refresh"
                        alternative-text="Refresh exported files"
                        title="Refresh exported files"
                        size="small"
                        onclick={handleRefreshExportedFiles}
                      ></lightning-button-icon>
                    </div>
                    <template if:true={hasExportedFiles}>
                      <lightning-datatable
                        key-field="path"
                        data={exportedFilesForDisplay}
                        columns={exportedFilesColumns}
                        hide-checkbox-column
                        show-row-number-column
                        onrowaction={handleExportedFileAction}
                        class="exported-files-table"
                      ></lightning-datatable>
                    </template>
                    <template if:false={hasExportedFiles}>
                      <div class="empty-section-message">
                        <lightning-icon icon-name="utility:info" size="x-small" class="slds-m-right_x-small"></lightning-icon>
                        <span>No exported files yet. Run an export to generate CSV files.</span>
                      </div>
                    </template>
                  </div>
                </lightning-card>
              </template>
              <template if:false={selectedWorkspace}>
                <lightning-card title="Workspace Actions">
                  <div class="slds-text-align_center slds-p-around_large">
                    <lightning-icon icon-name="utility:touch_action" size="large" class="slds-text-color_weak"></lightning-icon>
                    <h3 class="slds-text-heading_medium slds-m-top_medium">Select a Workspace</h3>
                    <p class="slds-text-body_regular slds-text-color_weak slds-m-top_small">
                      Click on a workspace from the list to see available actions and configuration details.
                    </p>
                  </div>
                </lightning-card>
              </template>
            </div>
          </div>
        </div>
      </template>
    </template>
  </div>

  <!-- Properties Modal (Create / Edit Workspace Properties) -->
  <template if:true={showPropertiesModal}>
    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
      <div class="slds-modal__container">
        <header class="slds-modal__header">
          <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={handleCancelProperties}>
            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
            <span class="slds-assistive-text">Close</span>
          </button>
          <h2 class="slds-modal__title slds-hyphenate">{propertiesModalTitle}</h2>
        </header>
        <div class="slds-modal__content slds-p-around_medium" id="modal-content-properties">
          <div class="slds-form-element slds-m-bottom_medium">
            <label class="slds-form-element__label" for="workspace-name">
              <abbr class="slds-required" title="required">* </abbr>Workspace Name
              <s-multiline-helptext content="The folder name for this workspace.<br/>This will create a folder in scripts/data/ directory."></s-multiline-helptext>
            </label>
            <div class="slds-form-element__control">
              <lightning-input
                variant="label-hidden"
                type="text"
                name="workspace-name"
                placeholder="e.g., AccountsData"
                value={workspaceProperties.name}
                onchange={handlePropertiesNameChange}
                required
              ></lightning-input>
            </div>
          </div>

          <div class="slds-form-element slds-m-bottom_medium">
            <label class="slds-form-element__label" for="workspace-label">
              <abbr class="slds-required" title="required">* </abbr>Display Label
              <s-multiline-helptext content="A human-readable name for this workspace.<br/>Displayed in the list to identify the SFDMU project."></s-multiline-helptext>
            </label>
            <div class="slds-form-element__control">
              <lightning-input
                variant="label-hidden"
                type="text"
                name="workspace-label"
                placeholder="e.g., Accounts Upsert"
                value={workspaceProperties.label}
                onchange={handlePropertiesLabelChange}
                required
              ></lightning-input>
            </div>
          </div>

          <div class="slds-form-element slds-m-bottom_medium">
            <label class="slds-form-element__label" for="workspace-description">
              Description
              <s-multiline-helptext content="Optional description to explain the purpose of this SFDMU configuration."></s-multiline-helptext>
            </label>
            <div class="slds-form-element__control">
              <lightning-textarea
                variant="label-hidden"
                name="workspace-description"
                placeholder="Describe what this workspace is used for..."
                value={workspaceProperties.description}
                onchange={handlePropertiesDescriptionChange}
              ></lightning-textarea>
            </div>
          </div>
        </div>
        <footer class="slds-modal__footer">
          <lightning-button
            variant="neutral"
            label="Cancel"
            onclick={handleCancelProperties}
          ></lightning-button>
          <lightning-button
            variant="brand"
            label={savePropertiesButtonLabel}
            disabled={savePropertiesButtonDisabled}
            onclick={handleSaveProperties}
          ></lightning-button>
        </footer>
      </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
  </template>

  <!-- Object Editor Modal (Add / Edit Single Object) -->
  <template if:true={showObjectModal}>
    <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
      <div class="slds-modal__container">
        <header class="slds-modal__header">
          <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={handleCancelObject}>
            <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
            <span class="slds-assistive-text">Close</span>
          </button>
          <h2 class="slds-modal__title slds-hyphenate">{objectModalTitle}</h2>
        </header>
        <div class="slds-modal__content slds-p-around_medium" id="modal-content-object">
          <div class={objectSoqlFormElementClass}>
            <label class="slds-form-element__label">
              <abbr class="slds-required" title="required">* </abbr>SOQL Query
              <s-multiline-helptext content="SOQL query defining records for this object. Ensure required External Id is included when using Upsert."></s-multiline-helptext>
            </label>
            <div class="slds-form-element__control">
              <lightning-textarea
                variant="label-hidden"
                name="soql-query"
                placeholder="SELECT Id, Name FROM Account"
                data-field="query"
                value={editingObject.query}
                onchange={handleObjFieldChange}
                required
              ></lightning-textarea>
              <template if:true={objectHasSoqlError}>
                <div class="slds-form-element__help" role="alert">{objectSoqlError}</div>
              </template>
            </div>
          </div>

          <div class="slds-grid slds-gutters">
            <div class="slds-col slds-size_1-of-2">
              <div class="slds-form-element slds-m-bottom_medium">
                <label class="slds-form-element__label">
                  Operation
                  <s-multiline-helptext content="SFDMU operation for this object (Export/Insert/Update/Upsert/Delete)."></s-multiline-helptext>
                </label>
                <div class="slds-form-element__control">
                  <lightning-combobox
                    variant="label-hidden"
                    name="operation"
                    data-field="operation"
                    value={editingObject.operation}
                    options={operationOptions}
                    onchange={handleObjFieldChange}
                  ></lightning-combobox>
                </div>
              </div>
            </div>

            <div class="slds-col slds-size_1-of-2">
              <div class="slds-form-element slds-m-bottom_medium">
                <label class="slds-form-element__label">
                  External Id (for Upsert)
                  <s-multiline-helptext content="External ID field used for upsert or relationship resolution."></s-multiline-helptext>
                </label>
                <div class="slds-form-element__control">
                  <lightning-input
                    variant="label-hidden"
                    type="text"
                    name="external-id"
                    placeholder="AccountExtId__c"
                    data-field="externalId"
                    value={editingObject.externalId}
                    onchange={handleObjFieldChange}
                  ></lightning-input>
                </div>
              </div>
            </div>
          </div>

          <div class="slds-grid slds-gutters">
            <div class="slds-col slds-size_1-of-2">
              <div class="slds-form-element slds-m-bottom_medium">
                <label class="slds-form-element__label">
                  Batch Size
                  <s-multiline-helptext content="Number of records per batch (Bulk/REST). Leave blank to use SFDMU default."></s-multiline-helptext>
                </label>
                <div class="slds-form-element__control">
                  <lightning-input
                    variant="label-hidden"
                    type="number"
                    name="batch-size"
                    min="0"
                    value={editingObject.batchSize}
                    onchange={handleObjBatchSizeChange}
                  ></lightning-input>
                </div>
              </div>
            </div>
            <div class="slds-col slds-size_1-of-2">
              <div class="slds-form-element slds-m-bottom_medium">
                <label class="slds-form-element__label">
                  Object
                  <s-multiline-helptext content="Object name inferred from SOQL query."></s-multiline-helptext>
                </label>
                <div class="slds-form-element__control">
                  <lightning-input
                    variant="label-hidden"
                    type="text"
                    name="object-name"
                    value={editingObjectName}
                    placeholder={editingObjectName}
                    disabled
                  ></lightning-input>
                </div>
              </div>
            </div>
          </div>

          <div class="slds-form-element slds-m-bottom_medium">
            <div class="slds-grid slds-grid_vertical-align-center">
              <div class="slds-no-flex">
                <lightning-input
                  type="toggle"
                  variant="label-hidden"
                  name="all-or-none"
                  aria-label="All or none (rollback on errors)"
                  message-toggle-active=""
                  message-toggle-inactive=""
                  checked={editingObject.allOrNone}
                  data-field="allOrNone"
                  onchange={handleObjToggleChange}
                ></lightning-input>
              </div>
              <div class="slds-grid slds-grid_vertical-align-center slds-m-left_small">
                <span class="slds-text-body_regular">All or none (rollback on errors)</span>
                <span class="slds-no-flex slds-m-left_xx-small">
                  <s-multiline-helptext content="If enabled, SFDMU will rollback the batch on errors (allOrNone behaviour)."></s-multiline-helptext>
                </span>
              </div>
            </div>
          </div>

          <div class="slds-form-element slds-m-bottom_medium">
            <div class="slds-grid slds-grid_vertical-align-center">
              <div class="slds-no-flex">
                <lightning-input
                  type="toggle"
                  variant="label-hidden"
                  name="delete-old-data"
                  aria-label="Delete records missing from the dataset"
                  message-toggle-active=""
                  message-toggle-inactive=""
                  checked={editingObject.deleteOldData}
                  data-field="deleteOldData"
                  onchange={handleObjToggleChange}
                ></lightning-input>
              </div>
              <div class="slds-grid slds-grid_vertical-align-center slds-m-left_small">
                <span class="slds-text-body_regular">Delete records missing from the dataset</span>
                <span class="slds-no-flex slds-m-left_xx-small">
                  <s-multiline-helptext content="If enabled, records not present in the CSV/data set will be deleted in target org."></s-multiline-helptext>
                </span>
              </div>
            </div>
          </div>

          <div class="slds-form-element slds-m-bottom_medium">
            <div class="slds-grid slds-grid_vertical-align-center">
              <div class="slds-no-flex">
                <lightning-input
                  type="toggle"
                  variant="label-hidden"
                  name="use-query-all"
                  aria-label="Include archived and deleted records (QueryAll)"
                  message-toggle-active=""
                  message-toggle-inactive=""
                  checked={editingObject.useQueryAll}
                  data-field="useQueryAll"
                  onchange={handleObjToggleChange}
                ></lightning-input>
              </div>
              <div class="slds-grid slds-grid_vertical-align-center slds-m-left_small">
                <span class="slds-text-body_regular">Include archived and deleted records (QueryAll)</span>
                <span class="slds-no-flex slds-m-left_xx-small">
                  <s-multiline-helptext content="If enabled, SFDMU uses QueryAll to include archived and soft-deleted records."></s-multiline-helptext>
                </span>
              </div>
            </div>
          </div>

          <div class="slds-form-element slds-m-bottom_medium">
            <div class="slds-grid slds-grid_vertical-align-center">
              <div class="slds-no-flex">
                <lightning-input
                  type="toggle"
                  variant="label-hidden"
                  name="update-with-mock-data"
                  aria-label="Update with mock data"
                  message-toggle-active=""
                  message-toggle-inactive=""
                  checked={editingObject.updateWithMockData}
                  data-field="updateWithMockData"
                  onchange={handleObjToggleChange}
                ></lightning-input>
              </div>
              <div class="slds-grid slds-grid_vertical-align-center slds-m-left_small">
                <span class="slds-text-body_regular">Update with mock data</span>
                <span class="slds-no-flex slds-m-left_xx-small">
                  <s-multiline-helptext content="Enable mock data generation for fields defined below."></s-multiline-helptext>
                </span>
              </div>
            </div>
          </div>

          <template if:true={editingObjectShowMockFields}>
            <div class="slds-box slds-box_x-small slds-m-bottom_medium">
              <div class="slds-grid slds-grid_align-spread slds-grid_vertical-align-center slds-m-bottom_small">
                <h5 class="slds-text-title_caps">Mock fields</h5>
                <lightning-button
                  variant="neutral"
                  label="Add mock field"
                  icon-name="utility:add"
                  onclick={handleAddObjMockField}
                ></lightning-button>
              </div>
              <template for:each={editingObjectMockFieldsWithIndex} for:item="mockField" for:index="fieldIndex">
                <div key={mockField.displayIndex} class="slds-grid slds-gutters slds-m-bottom_x-small slds-grid_vertical-align-end">
                  <div class="slds-col slds-size_5-of-12">
                    <div class="slds-form-element">
                      <label class="slds-form-element__label">Field</label>
                      <div class="slds-form-element__control">
                        <lightning-input
                          variant="label-hidden"
                          type="text"
                          name="mock-field-name"
                          placeholder="Email__c"
                          data-fieldindex={fieldIndex}
                          data-field="name"
                          value={mockField.name}
                          onchange={handleObjMockFieldChange}
                        ></lightning-input>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_5-of-12">
                    <div class="slds-form-element">
                      <label class="slds-form-element__label">Pattern</label>
                      <div class="slds-form-element__control">
                        <lightning-combobox
                          variant="label-hidden"
                          name="mock-field-pattern"
                          placeholder="Select pattern"
                          data-fieldindex={fieldIndex}
                          data-field="pattern"
                          value={mockField.pattern}
                          options={mockPatternOptions}
                          onchange={handleObjMockFieldChange}
                        ></lightning-combobox>
                      </div>
                    </div>
                  </div>
                  <div class="slds-col slds-size_2-of-12">
                    <div class="slds-form-element">
                      <label class="slds-form-element__label">&nbsp;</label>
                      <div class="slds-form-element__control">
                        <lightning-button
                          variant="destructive-text"
                          icon-name="utility:delete"
                          label="Remove"
                          data-fieldindex={fieldIndex}
                          onclick={handleRemoveObjMockField}
                          disabled={editingObjectDisableMockFieldRemove}
                        ></lightning-button>
                      </div>
                    </div>
                  </div>
                </div>
              </template>
            </div>
          </template>
        </div>
        <footer class="slds-modal__footer">
          <lightning-button
            variant="neutral"
            label="Cancel"
            onclick={handleCancelObject}
          ></lightning-button>
          <lightning-button
            variant="brand"
            label={saveObjectButtonLabel}
            disabled={saveObjectButtonDisabled}
            onclick={handleSaveObject}
          ></lightning-button>
        </footer>
      </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
  </template>
</template>
